# XML Валидатор

Простое приложение на Go, которое проверяет XML файлы на соответствие XSD схемам и выводит все ошибки и несоответствия.

## Предварительные требования

- Go 1.16 или выше
- Приложение использует пакет `github.com/lestrrat-go/libxml2`, который требует установки библиотеки libxml2 в вашей системе.

### Установка libxml2

#### macOS
```
brew install libxml2
```

#### Ubuntu/Debian
```
sudo apt-get install libxml2-dev
```

#### CentOS/RHEL
```
sudo yum install libxml2-devel
```

## Сборка приложения

Приложение требует установки libxml2 и pkg-config. Скрипт сборки установит необходимые переменные окружения за вас.

```
# Установка зависимостей (macOS)
brew install libxml2 pkg-config

# Сборка приложения
./build.sh
```

## Использование

Вы можете запустить приложение напрямую:

```
./validate_xml_by_xsd -xml <путь_к_xml_файлу> -xsd <путь_к_xsd_схеме>
```

Или использовать предоставленный скрипт-обертку, который устанавливает необходимые переменные окружения:

```
./validate.sh -xml <путь_к_xml_файлу> -xsd <путь_к_xsd_схеме>
```

### Примеры

Использование прямой команды:
```
./validate_xml_by_xsd -xml valid.xml -xsd schema.xsd
```

Использование скрипта-обертки:
```
./validate.sh -xml valid.xml -xsd schema.xsd
```

### Запуск тестов

Предоставлен тестовый скрипт для демонстрации валидации как с корректными, так и с некорректными XML файлами:

```
./test.sh
```

Это запустит валидатор для обоих примеров файлов и отобразит результаты.

## Примеры файлов

Репозиторий включает примеры файлов для тестирования:

- `schema.xsd`: Пример XSD схемы для книжного магазина
- `valid.xml`: Корректный XML файл, соответствующий схеме
- `invalid.xml`: Некорректный XML файл с несколькими ошибками валидации

## Пример вывода

Для корректного XML файла:
```
XML validation successful! The XML file conforms to the XSD schema.
```

Для некорректного XML файла:
```
XML validation failed. Errors:
1. Element 'book': The attribute 'id' is required but missing.
2. Element 'year': 'Twenty Twenty-Two' is not a valid value of the atomic type 'xs:integer'.
3. Element 'category': This element is not expected. Expected is ( price ).
4. Element 'publisher': This element is not expected.
```

## Структура проекта

- **main.go**: Основное приложение Go, выполняющее валидацию XML
- **schema.xsd**: Пример XSD схемы для книжного магазина
- **valid.xml**: Корректный XML файл, соответствующий схеме
- **invalid.xml**: Некорректный XML файл с несколькими ошибками валидации
- **build.sh**: Скрипт для сборки приложения с правильными переменными окружения
- **validate.sh**: Скрипт-обертка для запуска приложения с правильными переменными окружения
- **test.sh**: Скрипт для демонстрации валидации с корректными и некорректными XML файлами

## Функции

- Валидация XML файлов по XSD схемам
- Предоставление подробных сообщений об ошибках при неудачной валидации
- Обработка различных сценариев валидации:
  - Отсутствие обязательных атрибутов
  - Неверные типы данных
  - Отсутствие обязательных элементов
  - Дополнительные элементы, не определенные в схеме
